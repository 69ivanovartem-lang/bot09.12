import sqlite3
import random

# –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –±–∞–∑–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
conn = sqlite3.connect('zettelkasten.db')
cursor = conn.cursor()

# –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
cursor.execute('''
    CREATE TABLE IF NOT EXISTS notes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        title TEXT NOT NULL,
        content TEXT NOT NULL,
        tags TEXT,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
''')

cursor.execute('''
    CREATE TABLE IF NOT EXISTS note_links (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        from_note_id INTEGER NOT NULL,
        to_note_id INTEGER NOT NULL,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (from_note_id) REFERENCES notes (id),
        FOREIGN KEY (to_note_id) REFERENCES notes (id)
    )
''')

# –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
cursor.execute('DELETE FROM note_links')
cursor.execute('DELETE FROM notes')

# –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫
topics = ['–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', '–ù–∞—É–∫–∞', '–§–∏–ª–æ—Å–æ—Ñ–∏—è', '–ò—Å—Ç–æ—Ä–∏—è', '–ò—Å–∫—É—Å—Å—Ç–≤–æ', '–ú—É–∑—ã–∫–∞', '–°–ø–æ—Ä—Ç', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è']
subtopics = {
    '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ': ['Python', 'JavaScript', '–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö', '–ê–ª–≥–æ—Ä–∏—Ç–º—ã', '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', '–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'],
    '–ù–∞—É–∫–∞': ['–§–∏–∑–∏–∫–∞', '–•–∏–º–∏—è', '–ë–∏–æ–ª–æ–≥–∏—è', '–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è', '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', '–ì–µ–æ–ª–æ–≥–∏—è'],
    '–§–∏–ª–æ—Å–æ—Ñ–∏—è': ['–≠—Ç–∏–∫–∞', '–õ–æ–≥–∏–∫–∞', '–ú–µ—Ç–∞—Ñ–∏–∑–∏–∫–∞', '–≠—Å—Ç–µ—Ç–∏–∫–∞', '–ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è'],
    '–ò—Å—Ç–æ—Ä–∏—è': ['–î—Ä–µ–≤–Ω–∏–π –º–∏—Ä', '–°—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å–µ', '–†–µ–Ω–µ—Å—Å–∞–Ω—Å', '–ù–æ–≤–æ–µ –≤—Ä–µ–º—è', '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å'],
    '–ò—Å–∫—É—Å—Å—Ç–≤–æ': ['–ñ–∏–≤–æ–ø–∏—Å—å', '–°–∫—É–ª—å–ø—Ç—É—Ä–∞', '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è', '–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞', '–î–∏–∑–∞–π–Ω'],
    '–ú—É–∑—ã–∫–∞': ['–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è', '–î–∂–∞–∑', '–†–æ–∫', '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è', '–ù–∞—Ä–æ–¥–Ω–∞—è'],
    '–°–ø–æ—Ä—Ç': ['–§—É—Ç–±–æ–ª', '–ë–∞—Å–∫–µ—Ç–±–æ–ª', '–¢–µ–Ω–Ω–∏—Å', '–ü–ª–∞–≤–∞–Ω–∏–µ', '–ë–µ–≥'],
    '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è': ['–ï–≤—Ä–æ–ø–∞', '–ê–∑–∏—è', '–ê–º–µ—Ä–∏–∫–∞', '–ê—Ñ—Ä–∏–∫–∞', '–û–∫–µ–∞–Ω–∏—è']
}

contents = [
    "–≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∏–¥–µ—è, –∫–æ—Ç–æ—Ä—É—é —Å—Ç–æ–∏—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å –¥–∞–ª—å—à–µ.",
    "–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –æ—á–µ–Ω—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã.",
    "–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑—É—á–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ.",
    "–≠—Ç–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö.",
    "–í–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.",
    "–≠—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ –º–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Ç–µ–º–µ.",
    "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–æ–π —Ç–µ–æ—Ä–∏–∏ –æ—á–µ–Ω—å —à–∏—Ä–æ–∫–æ.",
    "–°—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏."
]

# –°–æ–∑–¥–∞–µ–º 10 —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_id = 123456789
note_ids = []

for i in range(10):
    topic = random.choice(topics)
    subtopic = random.choice(subtopics[topic])
    content = random.choice(contents)
    
    title = f"{subtopic} - –∏–¥–µ—è {i+1}"
    tags = f"{topic}, {subtopic}"
    
    cursor.execute(
        'INSERT INTO notes (user_id, title, content, tags) VALUES (?, ?, ?, ?)',
        (user_id, title, content, tags)
    )
    note_ids.append(cursor.lastrowid)
    print(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∑–∞–º–µ—Ç–∫–∞: {title}")

# –°–æ–∑–¥–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∑–∞–º–µ—Ç–∫–∞–º–∏
for i in range(15):
    from_id = random.choice(note_ids)
    to_id = random.choice(note_ids)
    
    if from_id != to_id:
        cursor.execute(
            'INSERT INTO note_links (from_note_id, to_note_id) VALUES (?, ?)',
            (from_id, to_id)
        )
        print(f"üîó –°–æ–∑–¥–∞–Ω–∞ —Å–≤—è–∑—å: {from_id} ‚Üí {to_id}")

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
conn.commit()
conn.close()

print(f"\nüéâ –ì–æ—Ç–æ–≤–æ!")
print(f"üìù –°–æ–∑–¥–∞–Ω–æ –∑–∞–º–µ—Ç–æ–∫: {len(note_ids)}")
print(f"üîó –°–æ–∑–¥–∞–Ω–æ —Å–≤—è–∑–µ–π: 15")
print(f"üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {user_id}")
print(f"\nüöÄ –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:")
print(f"   /notes - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏")
print(f"   /tree - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤—è–∑–∏")